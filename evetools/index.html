
<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-siteapp"/>
  <title>首页 - EVE工具箱</title>
  <base href="/evetools/">
  <link rel="stylesheet" href="css/mdui.min.css?v=0.4.1"/>
  <link rel="stylesheet" href="css/evetools.css?v=0.0.1"/>
  <!-- <script src="js/react.min.js" async></script>
  <script src="js/react-dom.min.js" async></script> -->
</head>

<body class="mdui-drawer-body-left mdui-appbar-with-toolbar mdui-theme-primary-blue-grey mdui-theme-accent-light-blue mdui-theme-layout-dark">
<header class="mdui-appbar mdui-appbar-fixed">
  <div class="mdui-toolbar mdui-color-theme">
    <span class="mdui-btn mdui-btn-icon mdui-ripple mdui-ripple-white" mdui-drawer="{target: '#main-drawer', swipe: true}"><i class="mdui-icon material-icons">menu</i></span>
    <a href="/evetools/" class="mdui-typo-headline mdui-hidden-xs"><?= $APPNAME ?></a>
    <a href="#" class="mdui-typo-title">首页</a>
    <div class="mdui-toolbar-spacer"></div>
  </div>
</header>

<main>
<div class="mdui-drawer" id="main-drawer">
  <div class="mdui-list" mdui-collapse="{accordion: true}" style="margin-bottom: 76px;">
    <a href="./" class="mdui-list-item mdui-ripple">
      <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color">home</i>
      <div class="mdui-list-item-content">首页</div>
    </a>
    <div class="mdui-collapse-item mdui-collapse-item-open">
      <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
        <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-accent">equalizer</i>
        <div class="mdui-list-item-content">计算器</div>
        <i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
      </div>
      <div class="mdui-collapse-item-body mdui-list">
        <a href="./" class="mdui-list-item mdui-ripple ">计算2个星系之间的距离</a>
      </div>
    </div>
  </div>
</div>

<a id="anchor-top"></a>
<div class="mdui-container">


<h1>首页</h1>
内测中……
<br />
<br />
<br />

<h2>计算器</h2>

<h3>计算2个星系之间的距离</h3>
<div class="calculator-jumpplanner calculator-jumpplanner-calc_distance">
  <form action="#" onsubmit="return false">
    <input type="hidden" name="feature" value="calc_distance">

    <div class="mdui-row">
      <div class="mdui-textfield mdui-col-sm-6">
        <label class="mdui-textfield-label">星系A</label>
        <div class="input-galaxy">
          <input class="mdui-textfield-input" type="text" list="galaxyList" value="Tanoo"/>
          <input class="mdui-textfield-input" type="hidden" name="galaxy_a"/>
        </div>
      </div>
      <div class="mdui-textfield mdui-col-sm-6">
        <label class="mdui-textfield-label">星系B</label>
        <div class="input-galaxy">
          <input class="mdui-textfield-input" type="text" list="galaxyList" value="安特"/>
          <input class="mdui-textfield-input" type="hidden" name="galaxy_b"/>
        </div>
      </div>

      <div class="mdui-col-sm-10"><span class="msg"></span></div>
      <button type="submit" class="mdui-col-sm-2 mdui-float-right mdui-btn mdui-btn-raised mdui-ripple mdui-color-theme-accent" disabled>计算！</button>
      
    </div>
  </form>
</div>

<h3>查询一跳可达的星系</h3>
<div class="calculator-jumpplanner calculator-jumpplanner-one_jump">
  <form action="#" onsubmit="return false">
    <input type="hidden" name="feature" value="one_jump">

    <div class="mdui-row">
      <div class="mdui-textfield mdui-col-sm-6">
        <label class="mdui-textfield-label">出发星系</label>
        <div class="input-galaxy">
          <input class="mdui-textfield-input" type="text" list="galaxyList" value="Tanoo"/>
          <input class="mdui-textfield-input" type="hidden" name="galaxy"/>
        </div>
      </div>
      <div class="mdui-textfield mdui-col-sm-6">
        <label class="mdui-textfield-label">跳跃距离（单位：光年）</label>
        <input class="mdui-textfield-input" type="text" name="jump_distance" value="2"/>
      </div>

      <div class="mdui-col-sm-10"><span class="msg"></span></div>
      <button type="submit" class="mdui-col-sm-2 mdui-float-right mdui-btn mdui-btn-raised mdui-ripple mdui-color-theme-accent" disabled>计算！</button>

    </div>
  </form>
</div>


<h3>星系跳跃路径规划</h3>
<div class="calculator-jumpplanner calculator-jumpplanner-jump_planner">
  <form action="#" onsubmit="return false">
    <input type="hidden" name="feature" value="jump_planner">

    <div class="mdui-row">
      <div class="mdui-textfield mdui-col-sm-4">
        <label class="mdui-textfield-label">出发星系</label>
        <div class="input-galaxy">
          <input class="mdui-textfield-input" type="text" list="galaxyList" value="赤壁"/>
          <input class="mdui-textfield-input" type="hidden" name="galaxy_a"/>
        </div>
      </div>
      <div class="mdui-textfield mdui-col-sm-4">
        <label class="mdui-textfield-label">目标星系</label>
        <div class="input-galaxy">
          <input class="mdui-textfield-input" type="text" list="galaxyList" value="安特"/>
          <input class="mdui-textfield-input" type="hidden" name="galaxy_b"/>
        </div>
      </div>
      <div class="mdui-textfield mdui-col-sm-4">
        <label class="mdui-textfield-label">跳跃距离（单位：光年）</label>
        <input class="mdui-textfield-input" type="text" name="jump_distance" value="3"/>
      </div>

      <div class="mdui-col-sm-10"><span class="msg"></span></div>
      <button type="submit" class="mdui-col-sm-2 mdui-float-right mdui-btn mdui-btn-raised mdui-ripple mdui-color-theme-accent" disabled>计算！</button>

    </div>
  </form>
</div>

<!-- 星系编辑框自动填充，以及星系中文查询翻译功能 -->
<script src="js/data-galaxyList.js?v=(20181007.183248)" async></script>
<datalist id="galaxyList"></datalist>

<script src="js/jquery-3.3.1.min.js" defer></script>

<script defer>
(function(){

  var queryJumpplanner = function(e){
    var msg_span = this.querySelector(".msg");
    var calc_btn = this.querySelector('button[type="submit"]')
    // 防止重复点击
    calc_btn.disabled = true;
    // 防止提交表单
    e.preventDefault();
    // 查询时尝试翻译星系
    [...this.querySelectorAll('.input-galaxy')].map(
      e =>{
        e.querySelector("input[name]").value = (
          typeof(translate_galaxy_to_english) === "function"
          && translate_galaxy_to_english(e.querySelector('[list="galaxyList"]').value)
          || e.querySelector('[list="galaxyList"]').value
        )
      }
    )
    
    // 提交表单
    $.ajax({
      url:"https://xinhang.snomiao.com/evetools/jumpplanner.aspx",
      type: "GET",
      dataType: "json",
      data: $(this).serialize(),
      success: function(data){msg_span.innerText = data.msg || data.error;calc_btn.disabled = false;},
      error: function(request){msg_span.innerText = `服务器忙，请稍后再试`;calc_btn.disabled = false;},
      finally: function(){calc_btn.disabled = false;},
      async: true
    });
    return false;
  }

  var formList = [...document.querySelectorAll(".calculator-jumpplanner>form")];
  formList.map(form =>{
    var msg_span = form.querySelector(".msg");
    var calc_btn = form.querySelector('button[type="submit"]')
    calc_btn.disabled = false;
    
    form.addEventListener("submit", queryJumpplanner);
  })
})()

</script>

<!-- footer -->
<footer>
  <div class="mdui-container">
    <div class="mdui-row footer-nav">
      <div class="mdui-col-sm-3 mdui-col-xs-6">
        <h4>星航传媒社区</h4>
        <ul>
          <li><a href="https://live.bilibili.com/169137" target="_blank">哔哩哔哩直播间</a></li>
          <li><a href="https://space.bilibili.com/1581878/#/video" target="_blank">哔哩哔哩视频</a></li>
          
        </ul>
      </div>
      <div class="mdui-col-sm-3 mdui-col-xs-6">
        <h4>资源</h4>
        <ul>
          <li>并没有x</li>
        </ul>
      </div>
    </div>
    
    <div class="mdui-divider-light footer-divider"></div>

    <div class="footer-copyright">Copyright © 2018 <a href="./">星航传媒</a>, <a href="https://snomiao.blogspot.com" target="_blank">雪星实验室</a> All rights reserved.</div>
  </div>
</footer>

<script src="js/mdui.min.js?v=0.4.1"></script>
<script>var $$ = mdui.JQ;</script>
</body>
</html>